(function(t){function n(n){for(var a,r,l=n[0],c=n[1],u=n[2],d=0,p=[];d<l.length;d++)r=l[d],i[r]&&p.push(i[r][0]),i[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);o&&o(n);while(p.length)p.shift()();return s.push.apply(s,u||[]),e()}function e(){for(var t,n=0;n<s.length;n++){for(var e=s[n],a=!0,l=1;l<e.length;l++){var c=e[l];0!==i[c]&&(a=!1)}a&&(s.splice(n--,1),t=r(r.s=e[0]))}return t}var a={},i={0:0},s=[];function r(n){if(a[n])return a[n].exports;var e=a[n]={i:n,l:!1,exports:{}};return t[n].call(e.exports,e,e.exports,r),e.l=!0,e.exports}r.m=t,r.c=a,r.d=function(t,n,e){r.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,n){if(1&n&&(t=r(t)),8&n)return t;if(4&n&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var a in t)r.d(e,a,function(n){return t[n]}.bind(null,a));return e},r.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(n,"a",n),n},r.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=n,l=l.slice();for(var u=0;u<l.length;u++)n(l[u]);var o=c;s.push([0,1]),e()})({"+KLR":function(t,n,e){"use strict";var a=e("Z0Tf"),i=e.n(a);i.a},"/hsH":function(t,n,e){},0:function(t,n,e){t.exports=e("Vtdi")},LSdI:function(t,n,e){"use strict";var a=e("vPL6"),i=e.n(a);i.a},Vtdi:function(t,n,e){"use strict";e.r(n);e("yt8O"),e("VRzm");var a=e("Kw5r"),i=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"app"}},[e("navbar"),e("div",{staticClass:"container"},[e("router-view")],1),e("Player")],1)},s=[],r=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("header",{staticClass:"top-nav"},[e("router-link",{staticClass:"nav-item",attrs:{to:"/","active-class":"active",exact:""}},[e("span",{staticClass:"nav-icon me"})]),e("router-link",{staticClass:"nav-item",attrs:{exact:"",to:"/music","active-class":"active"}},[e("span",{staticClass:"nav-icon music"})]),e("router-link",{staticClass:"nav-item",attrs:{to:"/community","active-class":"active"}},[e("span",{staticClass:"nav-icon community"})])],1)},l=[],c={name:"Navbar",data:function(){return{}},created:function(){},methods:{},destroyed:function(){}},u=c,o=(e("zTFn"),e("KHd+")),d=Object(o["a"])(u,r,l,!1,null,"790f82ec",null),p=d.exports,f=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{class:{"player-wrap":!0,show:!!t.url.url,full:!t.mini},on:{click:t.toggleFull}},[t.detail?e("div",{staticClass:"player"},[e("div",{staticClass:"cover"},[e("img",{class:t.isPlaying?"playing":"paused",attrs:{src:t.detail.al.picUrl,alt:"Cover"}})]),e("div",{staticClass:"info"},[e("p",{staticClass:"name"},[t._v(t._s(t.detail.name))]),e("p",{staticClass:"author"},[t._l(t.detail.ar,function(n){return[t._v("\n            "+t._s(n.name)+"\n          ")]})],2)]),e("div",{staticClass:"control"},[e("div",{class:["play",t.isPlaying?"playing":"paused"],on:{click:t.play}})]),t.mini?e("div",{staticClass:"duration-indicator-bg"},[e("div",{staticClass:"duration-indicator",style:{transform:t.timeRatio}})]):t._e()]):t._e(),t.mini?t._e():e("div",{staticClass:"togglemini",on:{click:t.toggleMini}}),e("audio",{ref:"player",attrs:{src:t.url?t.url.url:"",id:"player"}})])},m=[],v=e("yT7P"),y=e("L2JU"),h={name:"Player",props:{},data:function(){return{isPlaying:!1,duration:0,currentTime:0,mini:!0}},computed:Object(v["a"])({},Object(y["b"])({detail:function(t){return t.song.detail[0]},url:function(t){return t.song.url},queue:function(t){return t.song.queue}}),{timeRatio:function(){var t=this.currentTime/this.duration*100-100;return"translateX(".concat(t,"%)")}}),watch:{url:function(t,n){var e=this,a=this.$refs.player;t!==n&&(a.pause(),a.load(),a.oncanplay=function(){a.play(),e.duration=a.duration})},currentTime:function(t,n){t===this.duration&&(this.$store.dispatch("song/url",id),this.$store.dispatch("song/detail",id),console.log("end"))}},mounted:function(){var t=this,n=this.$refs.player;n.addEventListener("playing",function(){t.isPlaying=!0,t.$store.dispatch("song/play")}),n.addEventListener("pause",function(){t.isPlaying=!1,t.$store.dispatch("song/pause")}),n.addEventListener("timeupdate",function(){t.currentTime=n.currentTime})},methods:{toggleFull:function(t){t.target.classList.contains("play")||t.target.classList.contains("togglemini")||(this.mini=!1,document.body.style.overflow="hidden")},toggleMini:function(){document.body.style.overflow="auto",this.mini=!0},play:function(){var t=this.$refs.player;this.isPlaying?t.pause():t.play()}}},g=h,b=(e("sYVb"),Object(o["a"])(g,f,m,!1,null,"4d0c89a8",null)),_=b.exports,C={components:{Navbar:p,Player:_}},j=C,w=(e("zyWh"),Object(o["a"])(j,i,s,!1,null,null,null)),O=w.exports,$=e("jE9Z"),P=function(){var t=this,n=t.$createElement,e=t._self._c||n;return t.userdetail.code?e("div",{staticClass:"user-wrap"},[e("div",{staticClass:"userdetail-wrap"},[e("div",{staticClass:"userdetail"},[e("img",{staticClass:"user-bg",attrs:{src:t.userdetail.profile.backgroundUrl}}),e("img",{staticClass:"user-avatar",attrs:{src:t.userdetail.profile.avatarUrl,alt:"avatar"}}),e("div",{staticClass:"user-info"},[e("p",{staticClass:"user-info-name"},[t._v("\n                    "+t._s(t.userdetail.profile.nickname)+"\n                ")])])])]),e("div",{staticClass:"user-playlist"},[e("div",{staticClass:"user-custom-playlist"},[t._l(t.userplaylist,function(n,a){return[0===a?e("div",{key:a,staticClass:"playlist-label my-playlist"},[t._v("我创建的歌单")]):t._e(),a===t.playlistcount?e("div",{key:a,staticClass:"playlist-label my-playlist"},[t._v("我收藏的歌单")]):t._e(),e("router-link",{key:n.id,staticClass:"playlist-item",attrs:{to:{name:"playlist",params:{id:n.id}},tag:"div"}},[e("div",{staticClass:"playlist-cover"},[e("img",{attrs:{src:n.coverImgUrl,alt:"cover"}})]),e("div",{staticClass:"playlist-name"},[t._v("\n                        "+t._s(n.name)+"\n                    ")])])]})],2),e("div",{staticClass:"user-subscribed-playlist"})])]):e("spinner")},k=[],x=function(){var t=this,n=t.$createElement;t._self._c;return t._m(0)},E=[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"spinner-wrap"},[e("div",{staticClass:"spinner"})])}],L={name:"Spinner"},S=L,T=(e("mGHb"),Object(o["a"])(S,x,E,!1,null,null,null)),M=T.exports,q={name:"Me",components:{Spinner:M},data:function(){return{}},created:function(){this.$store.dispatch("user/detail"),this.$store.dispatch("user/playlist")},computed:Object(v["a"])({},Object(y["b"])({userdetail:function(t){return t.user.detail},userplaylist:function(t){return t.user.playlist},playlistcount:function(t){return t.user.playlistcount}})),methods:{}},R=q,D=(e("+KLR"),Object(o["a"])(R,P,k,!1,null,null,null)),H=D.exports,U=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("h1",[t._v("Music View")])},V=[],z={name:"Music"},K=z,Y=Object(o["a"])(K,U,V,!1,null,null,null),F=Y.exports,I=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("h1",[t._v("Post View")])},X=[],J={name:"Community"},W=J,Z=Object(o["a"])(W,I,X,!1,null,null,null),G=Z.exports,N=function(){var t=this,n=t.$createElement,e=t._self._c||n;return t.playlist.name?e("div",{staticClass:"playlist-wrap"},[e("div",{staticClass:"playlist-detail-wrap"},[e("img",{attrs:{src:t.playlist.coverImgUrl,alt:"playlist.name"}}),e("h1",[t._v(t._s(t.playlist.name))])]),e("div",{staticClass:"playlist-tracks-wrap"},[t._l(t.playlist.tracks,function(t){return[e("Song",{key:t.id,attrs:{name:t.name,id:t.id}})]})],2)]):e("spinner")},B=[],A=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"song",on:{click:function(n){t.play(t.id,t.name)}}},[t._v("\n  "+t._s(t.name)+"\n")])},Q=[],tt={name:"Song",props:["name","id"],computed:Object(v["a"])({},Object(y["b"])({detail:function(t){return t.song.detail}})),methods:{play:function(t,n){this.$store.dispatch("song/url",t),this.$store.dispatch("song/detail",t),this.$store.dispatch("song/add",{id:t,name:n})}}},nt=tt,et=(e("LSdI"),Object(o["a"])(nt,A,Q,!1,null,"242e7d85",null)),at=et.exports,it={name:"Playlist",components:{Spinner:M,Song:at},data:function(){return{}},created:function(){this.$store.dispatch("playlist/detail",this.$route.params.id)},computed:Object(v["a"])({},Object(y["b"])({playlist:function(t){return t.playlist.detail}})),methods:{}},st=it,rt=(e("r2iu"),Object(o["a"])(st,N,B,!1,null,"b4ae831e",null)),lt=rt.exports;a["a"].use($["a"]);var ct=new $["a"]({mode:"history",routes:[{path:"/music",name:"music",component:F},{path:"/",name:"me",component:H},{path:"/community",name:"community",component:G},{path:"/playlist/:id",name:"playlist",component:lt}]}),ut=e("vDqi"),ot=e.n(ut);ot.a.defaults.baseURL="https://netease.maoyu.info";var dt=32693089,pt=function(){return ot.a.get("/user/detail?uid=".concat(dt)).then(function(t){return t.data})},ft=function(){return ot.a.get("/user/playlist?uid=".concat(dt)).then(function(t){return t.data})},mt=function(t){return ot.a.get("/playlist/detail?id=".concat(t)).then(function(t){return t.data})},vt=function(t){return ot.a.get("/music/url?id=".concat(t)).then(function(t){return t.data})},yt=function(t){return ot.a.get("/song/detail?ids=".concat(t)).then(function(t){return t.data})},ht={namespaced:!0,state:{detail:[],playlist:[],playlistcount:0},mutations:{saveDetail:function(t,n){t.detail=n},savePlaylist:function(t,n){t.playlist=n},setPlaylistCount:function(t,n){t.playlistcount=n}},actions:{detail:function(t){var n=t.commit;return pt().then(function(t){n("saveDetail",t),n("setPlaylistCount",t.profile.playlistCount)})},playlist:function(t){var n=t.commit;return ft().then(function(t){return n("savePlaylist",t.playlist)})}}},gt={namespaced:!0,state:{detail:[]},mutations:{clearDetail:function(t){t.detail=[]},saveDetail:function(t,n){t.detail=n}},actions:{detail:function(t,n){var e=t.commit;return e("clearDetail"),mt(n).then(function(t){return e("saveDetail",t.playlist)})}}},bt=(e("dRSK"),{namespaced:!0,state:{url:[],detail:[],queue:[],playing:!1},mutations:{url:function(t,n){t.url=n},detail:function(t,n){t.detail=n},playing:function(t,n){t.playing=n},add:function(t,n){t.queue.push(n)}},actions:{url:function(t,n){var e=t.commit;return vt(n).then(function(t){e("url","number"===typeof n?t.data[0]:t.data)})},detail:function(t,n){var e=t.commit;return yt(n).then(function(t){e("detail",t.songs)})},play:function(t){var n=t.commit;n("playing",!0)},pause:function(t){var n=t.commit;n("playing",!1)},add:function(t,n){var e=t.commit,a=t.state;a.queue.find(function(t){return t.id===n.id})||e("add",n)}}});a["a"].use(y["a"]);var _t=new y["a"].Store({modules:{user:ht,playlist:gt,song:bt}}),Ct={inserted:function(t){var n=document.createElement("div"),e=document.createElement("span");n.appendChild(e),n.classList.add("ripple-container"),e.classList.add("ripple"),t.addEventListener("mousedown",function(a){var i=a.pageX,s=a.pageY,r=t.getBoundingClientRect(),l=r.left,c=r.top,u=e.offsetWidth;console.log(i,s,l,c,u);var o=i-l-u/2,d=s-c-u/2;console.log(o,d),e.style.left=o+"px",e.style.top=d+"px",t.appendChild(n),e.classList.add("rippling")}),t.addEventListener("mouseup",function(){})}};a["a"].config.productionTip=!1,a["a"].directive("ripple",Ct),new a["a"]({router:ct,store:_t,render:function(t){return t(O)}}).$mount("#app")},Z0Tf:function(t,n,e){},aMXH:function(t,n,e){},bfYj:function(t,n,e){},c9kq:function(t,n,e){},mGHb:function(t,n,e){"use strict";var a=e("/hsH"),i=e.n(a);i.a},md7a:function(t,n,e){},r2iu:function(t,n,e){"use strict";var a=e("aMXH"),i=e.n(a);i.a},sYVb:function(t,n,e){"use strict";var a=e("c9kq"),i=e.n(a);i.a},vPL6:function(t,n,e){},zTFn:function(t,n,e){"use strict";var a=e("bfYj"),i=e.n(a);i.a},zyWh:function(t,n,e){"use strict";var a=e("md7a"),i=e.n(a);i.a}});
//# sourceMappingURL=app.01942061.js.map